<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>홈</title>
    <style>
        body {
            font-family: 'Helvetica Neue', sans-serif;
            background-color: #e9ecef;
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        table {
            width: 100%;
            max-width: 600px;
            border-collapse: collapse;
            margin-bottom: 20px;
            background-color: #ffffff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #dee2e6;
        }

        th {
            background-color: #566ca9;
            color: #ffffff;
            font-size: 18px;
            letter-spacing: 1px;
        }

        td {
            font-size: 16px;
        }

        tr:hover {
            background-color: #f8f9fa;
        }

        button {
            background-color: #566ca9;
            color: white;
            border: none;
            padding: 10px 15px;
            font-size: 14px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        button:hover {
            background-color: #4c5f8d;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }

        #playlistAdd {
            background-color: #566ca9;
            padding: 10px 15px;
            margin-top: 15px;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        #playlistAdd:hover {
            background-color: #4c5f8d;
            transform: translateY(-1px);
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body>
    <table id="table">
        <thead>
            <tr>
                <th>플레이리스트 이름</th>
                <th>수정</th>
                <th>삭제</th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
    <button id="playlistAdd" onclick="playlistAdd()">플레이리스트 추가</button>

    <script>
        let playlists = [];
        getPlaylist();

        async function getPlaylist() {
            await fetch("/api/v1/playlists").then(response => response.json())
                    .then(data => {
                        playlists = data;
                    });

            const tableBody = document.querySelector('#table tbody');
            tableBody.innerHTML = '';

            playlists.forEach(data => {
                const row = document.createElement('tr');
                const playlistCell = document.createElement('td');
                const correctionCell = document.createElement('td');
                const deleteCell = document.createElement('td');
                const playlistButton = document.createElement('button');
                const correctionButton = document.createElement('button');
                const deleteButton = document.createElement('button');

                playlistButton.textContent = data.playlistName;
                playlistButton.onclick = () => {
                    location.href = `/playlist?id=${data.playlistId}&name=${data.playlistName}`;
                };

                correctionButton.textContent = '수정';
                correctionButton.onclick = () => {
                    location.href = `/update?playlistId=${data.playlistId}`;
                };

                deleteButton.textContent = '제거';
                deleteButton.onclick = async () => {
                    await fetch(`/api/v1/playlist/delete?playlistId=${data.playlistId}&playlistName=${data.playlistName}`, { method: 'GET' })
                    await getPlaylist();
                };

                playlistCell.appendChild(playlistButton);
                deleteCell.appendChild(deleteButton);
                correctionCell.appendChild(correctionButton)
                row.appendChild(playlistCell);
                row.appendChild(correctionCell);
                row.appendChild(deleteCell);
                tableBody.appendChild(row);
            });
        }

        function playlistAdd() {
            location.href = '/add';
        }
    </script>
</body>
</html>
